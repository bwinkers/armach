"use strict";

var Promise = require('bluebird') // Promise library
    , dust = require('dustjs-linkedin')
    , dustHelper = require('dustjs-helpers')
;

/**
 * Support uploading a JSON file object with two elements.
 * {
 *     "data": {},
 *     "schema": {}
 * }
 * @param request
 * @returns {string}
 */
exports.root = function (conn) {

    return new Promise(function (resolve, reject) {

            var compiled = dust.compile("Hello {name}!", "intro");

            dust.loadSource(compiled);

            dust.render("intro", {name: "Fred"}, function(err, out) {
                resolve(out + conn.site.name);
            });



        });

}

/**
 * Support uploading a JSON file object with two elements.
 * {
 *     "data": {},
 *     "schema": {}
 * }
 * @param request
 * @returns {string}
 */
exports.test = function (conn) {

    return new Promise(function (resolve, reject) {

        var compiled = dust.compile("Hello {name}!", "intro");

        dust.loadSource(compiled);

        dust.render("intro", {name: "Fred"}, function(err, out) {
            resolve(out + conn.site.name);
        });



    });

}



