"use strict";

var fs = require("promised-io/fs");
var Promise = require("bluebird");

/**
 * Returns stats for the given file or null if it doesn't exist.
 */
function arFileStatus(path) {

    return new Promise(function (resolve, reject) {

        return fs.stat(path)
            .then(function (stat) {
                if (stat.isDirectory()) {
                    resolve('directory');
                }
                resolve('file');
            }, function (error) {  // Handle errors here
                // If the error code is ENOENT that means the path does not exist.
                // That really isn't an error so we call the fulfillment method with boolean false
                if (error.code === 'ENOENT') {
                    return resolve(false);
                }
                // Other errors are really treated as errors
                reject(error);
            });
    });
}

module.exports = arFileStatus;