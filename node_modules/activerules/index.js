"use strict";

var Promise = require('bluebird'); // Promises around fs calls
;

var getFileStats = require("./utils/getFileStats");

var getSiteHostConfig = require("./utils/getSiteHostConfig");

/**
 * A middleware that loads hostname based config files
 */
function ar(app, settings) {

    return function (conn) {

        return getFileStats(settings.configDir)
            .then(function (stats) {
                if (stats && stats.isFile()) {
                    console.log('Found File');
                }

                if (stats && stats.isDirectory()) {
                    console.log('Found Directory');
                    conn.configDirStat = stats;
                }

                return conn.call(app)
            });
    };
}

module.exports = ar;

