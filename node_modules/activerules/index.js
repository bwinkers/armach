"use strict";

var Promise = require('bluebird'); // Promises around fs calls
;

var getFileStats = require("./utils/getFileStats");

/**
 * A middleware that loads hostname based config files
 */
function ar(app, settings) {

    return function (conn) {

        return conn.call(app).then(function () {
            var req = conn.request;
            return getFileStats(settings.configDir)
                .then(function (stats) {
                    if (stats && stats.isFile()) {
                        console.log('Found File');
                    }

                    if (stats && stats.isDirectory()) {
                        console.log('Found Directory');
                        req.configDirStat = stats;
                    }
                });
        });
    };
}

module.exports = ar;



