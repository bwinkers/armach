"use strict";

var Promise = require("bluebird")
    , _ = require('lodash')
    , getFileStats = require("./getFileStats")
    , loadJSON = require("./loadJSON")
    , jsonExt = '.json'
    ;

/**
 * Returns a siteHostConfig object derived from a combination of host and site configs.
 */
function getSiteHostConfig(configRoot, hostname) {

    // The host file is in the configRoot "host" subdirectory
    var hostFilePath = configRoot + '/hosts/' + hostname + jsonExt;
    var siteFilePath = configRoot + '/sites/';
    var siteAlias = 'default';

    // Promise to return  the Site object
    return new Promise(function (resolve, reject) {

        console.log(hostFilePath);

        return getFileStats(hostFilePath)
            .then(function (hostStatResult) {

                console.log(hostStatResult);
                if (hostStatResult && hostStatResult === 'file') {

                    // We found a supported host file
                    console.log('Found host config file at: ' + hostFilePath);
                }

                resolve(true);

            })

    });
}

module.exports = getSiteHostConfig;