"use strict";

var Promise = require("bluebird")
    , fs = require("promised-io/fs"); // Promises around fs calls;

/**
 * Returns stats for the given file or null if it doesn't exist.
 */
function loadJSON(filePath) {

    var configObj; // The object to return

    // Return a promise right away
    return new Promise(function (fulfill, reject) {

        return fs.readFile(filePath, 'utf8')
            .then(function (file) {
                try {
                    configObj = JSON.parse(file);
                } catch (err) {
                    // probably bad JSON
                    console.log(err);
                    reject(err);
                }

                fulfill(configObj);

            }, function (err) {
                reject(err);
            });
    });
}

module.exports = loadJSON;